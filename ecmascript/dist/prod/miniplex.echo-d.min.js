"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.echoD=e():t.echoD=e()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(()=>(Object("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).webpackChunkechoD=Object("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).webpackChunkechoD||[]).push([[1],{506:(t,e,n)=>{n.a(t,(async(t,s)=>{try{n.r(e),n.d(e,{MiniplexStorage:()=>i});var o=n(699),r=n(464);const{World:t}=await n.e(939).then(n.t.bind(n,939,19));class i extends o.Ke{constructor(e,n){super({...e||{},actors:new Map,components:null,entities:new Map,inputs:null},n);const{worldOptions:s=[],world:o=null}=n;this.worldOptions=s,this.world=o||new t}derefEntity(t){return this.actors.has(t)?this.actors.get(t):this.entities.has(t)?this.entities.get(t):void 0}destroyActor(t){return this.destroyId(this.actors,t)}destroyComponent(t,e){const n=this.derefEntity(t);if(n){const s=n[e];this.world.removeComponent(n,e),this.removeComponentsIndex(t,e,s)}}destroyEntity(t){return this.destroyId(this.entities,t)}destroyId(t,e){const n=t.get(e);return!!n&&(this.world.remove(n),t.delete(e),!0)}findComponents(t){const e=this.derefEntity(t);if(e)return e}findComponent(t,e){const n=this.derefEntity(t);if(n)return n[e]}getActors(t=null,e){if(null!==t)return super.getActors(t,e);const n=Array.from(this.actors.keys());return(0,r.paginate)(n,e)}getComponents(t=null,e){let n;if(null!==t)n=t;else{const t=Array.from(this.actors.keys()),e=Array.from(this.entities.keys());n=t.concat(e)}return(0,r.paginate)(n,e).map((t=>{const e={};for(let n of t)e[n]=this.derefEntity(n);return e}))}getEntities(t=null,e){if(null!==t)return super.getEntities(t,e);const n=Array.from(this.entities.keys());return(0,r.paginate)(n,e)}getInputs(t=null,e){return super.getInputs(t,e)}isActor(t){return this.actors.has(t)}isEntity(t){return this.entities.has(t)}setActors(t){return super.setActors(t)}setComponents(t){return super.setComponents(t)}setEntities(t){return super.setEntities(t)}setInputs(t){return super.setInputs(t)}storeActor(t){return this.storeId(this.actors,t)}storeComponent(t,e,n){const s=this.derefEntity(t);if(s){const o=s[e];this.world.addComponent(s,e,n),this.updateComponentsIndex(t,e,o,n)}}storeEntity(t){return this.storeId(this.entities,t)}storeId(t,e){let n=t.get(e);return!n&&(n={},t.set(e,n),this.world.add(n),!0)}storeInput(t,e,n=(0,r.now)()){return super.storeInput(t,e,n)}}s()}catch(t){s(t)}}),1)}},t=>(506,t(t.s=506))])));
//# sourceMappingURL=miniplex.echo-d.min.js.map