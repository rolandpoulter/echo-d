!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.echoD=e():t.echoD=e()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(()=>(()=>{"use strict";var t,e,n,s,o,r,i,c,a,l={329:(t,e,n)=>{n.r(e),n.d(e,{ActorActions:()=>i,ActorActionsFactory:()=>r,actions:()=>a,default:()=>l});var s=n(343),o=n(883);const r=(t=Object)=>class extends t{actorInput(t,e,n){n=s.E.ensure(n,this);const{getActorId:r,compressStringsAsInts:i}=n;let c,a=0;Array.isArray(t)?(c=t[0],a=t[1]||0):c=t;let l=r(c?.id,e);null!=l&&""!==l&&(i&&(l=(0,o.dB)(l,e,n),""===l)||(c?.id||(c.id=l),e.actorInput(l,c,a,n)))}actors(t,e,n){n=n=s.E.ensure(n,this);const{responder:o,isAuthority:r,isAsyncStorage:i,pageSize:c,enableQuerying:a,enumDefaultSymbols:l}=n;if(!r)return;const u=t=>{for(const e of t)o([l.mergeActors,e])},h=e.getActors(a?t:null,c);i?h.emitTo(u,!0):u(h)}mergeActors(t,e,n){n=n=s.E.ensure(n,this),e.mergeActors(t,n)}removeActor(t,e,n){n=n=s.E.ensure(n,this);const{skipPending:r,getActorId:i,compressStringsAsInts:c}=n;null!=(t=i(t,e))&&""!==t&&(c&&""===(t=(0,o.dB)(t,e,n))||e.removeActor(t,r))}spawnActor(t,e,n){n=n=s.E.ensure(n,this);const{skipPending:r,getActorId:i,compressStringsAsInts:c}=n;null!=(t=i(t,e))&&""!==t&&(c&&""===(t=(0,o.dB)(t,e,n))||e.spawnActor(t,r))}};class i extends(r()){}const c=new i,a={actorInput:c.actorInput,actors:c.actors,mergeActors:c.mergeActors,removeActor:c.removeActor,spawnActor:c.spawnActor},l=a},730:(t,e,n)=>{n.r(e),n.d(e,{ComponentActions:()=>i,ComponentActionsFactory:()=>r,actions:()=>a,default:()=>l});var s=n(343),o=n(883);const r=(t=Object)=>class extends t{changeComponent(t,e,n){n=n=s.E.ensure(n,this);const{compressStringsAsInts:r,types:i,isOrdered:c}=n;let[a,l,u]=t,h=c?t[3]:0;if(null!=a&&""!==a&&null!=l&&""!==l){if(r){if(a=(0,o.dB)(a,e,n),!a)return;if(l=(0,o.dB)(l,e,n),!l)return;const t=i[l];if(t&&(t===String||t[0]===String)&&(u=(0,o.vX)(l,u,e,n),!u))return}return e.changeComponent(a,l,u,h,n)}}components(t,e,n){n=n=s.E.ensure(n,this);const{responder:o,isAuthority:r,isAsyncStorage:i,pageSize:c,enableQuerying:a,enumDefaultSymbols:l}=n;if(!r)return;const u=t=>{for(const e of t)o([l.mergeComponents,e])},h=e.getComponents(a?t:null,c);i?h.emitTo(u,!0):u(h)}mergeComponents(t,e,n){n=n=s.E.ensure(n,this),e.mergeComponents(t,n)}removeComponent(t,e,n){n=n=s.E.ensure(n,this);const{compressStringsAsInts:r}=n;let[i,c]=t;if(null!=i&&""!==i&&null!=c&&""!==c){if(r){if(i=(0,o.dB)(i,e,n),!i)return;if(c=(0,o.dB)(c,e,n),!c)return}e.removeComponent(i,c,n)}}upsertComponent(t,e,n){n=n=s.E.ensure(n,this);const{compressStringsAsInts:r,types:i,isOrdered:c}=n;let[a,l,u]=t,h=c?t[3]:0;if(null!=a&&""!==a&&null!=l&&""!==l){if(r){if(a=(0,o.dB)(a,e,n),!a)return;if(l=(0,o.dB)(l,e,n),!l)return;const t=i[l];if(t&&(t===String||t[0]===String)&&(u=(0,o.vX)(l,u,e,n),!u))return}return e.upsertComponent(a,l,u,h,n)}}};class i extends(r()){}const c=new i,a={changeComponent:c.changeComponent,components:c.components,mergeComponents:c.mergeComponents,removeComponent:c.removeComponent,upsertComponent:c.upsertComponent},l=a},982:(t,e,n)=>{n.r(e),n.d(e,{CoreActions:()=>i,CoreActionsFactory:()=>r,actions:()=>c,default:()=>a});var s=n(833),o=n(343);const r=(t=Object)=>class extends t{batch(t,e,n){n=n=o.E.ensure(n,this),(0,s.p0)(t,e,n)}};class i extends(r()){}const c={batch:(new i).batch},a=c},787:(t,e,n)=>{n.r(e),n.d(e,{EntityActions:()=>i,EntityActionsFactory:()=>r,actions:()=>a,default:()=>l});var s=n(343),o=n(883);const r=(t=Object)=>class extends t{createEntity(t,e,n){n=n=s.E.ensure(n,this);const{skipPending:r,compressStringsAsInts:i}=n;null!=t&&""!==t&&(i&&""===(t=(0,o.dB)(t,e,n))||e.createEntity(t,r))}entities(t,e,n){n=n=s.E.ensure(n,this);const{responder:o,isAuthority:r,isAsyncStorage:i,pageSize:c,enableQuerying:a,enumDefaultSymbols:l}=n;if(!r)return;const u=t=>{for(const e of t)o([l.mergeEntities,e])},h=e.getEntities(a?t:null,c);i?h.emitTo(u,!0):u(h)}mergeEntities(t,e,n){n=n=s.E.ensure(n,this),e.mergeEntities(t,n)}removeEntity(t,e,n){n=n=s.E.ensure(n,this);const{skipPending:r,compressStringsAsInts:i}=n;null!=t&&""!==t&&(i&&""===(t=(0,o.dB)(t,e,n))||e.removeEntity(t,r))}};class i extends(r()){}const c=new i,a={createEntity:c.createEntity,entities:c.entities,mergeEntities:c.mergeEntities,removeEntity:c.removeEntity},l=a},694:(t,e,n)=>{n.r(e),n.d(e,{SymbolActions:()=>i,SymbolActionsFactory:()=>r,actions:()=>a,default:()=>l});var s=n(343),o=n(464);const r=(t=Object)=>class extends t{addSymbol(t,e,n){return n=n=s.E.ensure(n,this),e.addSymbol(t,n)}fetchSymbol(t,e,n){n=n=s.E.ensure(n,this);const{responder:o,enumDefaultSymbols:r}=n;return e.fetchSymbol(t,n,(t=>{o([r.mergeSymbol,t])}))}getSymbol(t,e,n){return n=n=s.E.ensure(n,this),e.getSymbol(t,n)}mergeSymbol(t,e,n){n=n=s.E.ensure(n,this),e.mergeSymbol(t,n)}mergeSymbols(t,e,n){n=n=s.E.ensure(n,this);const[o,r]=t;t&&t.length&&e.resetSymbols(o,r,n)}symbol(t,e,n){n=n=s.E.ensure(n,this);const{actions:o,responder:r,isAuthority:i,enumDefaultSymbols:c,compressStringsAsInts:a}=n;if(!i||!a)return;const l=e.symbolsEnum??{};let u=Object.prototype.hasOwnProperty.call(l,t)?l[t]:-1;-1===u&&(u=o.addSymbol(t,e,n)),-1!==u&&r([c.mergeSymbol,[t,u]])}symbols(t,e,n){n=n=s.E.ensure(n,this);const{responder:r,isAuthority:i,pageSize:c,enumDefaultSymbols:a,compressStringsAsInts:l}=n;if(!i||!l)return;const u=e.symbolsList;if(u&&u.length){const t=(0,o.paginate)(u,c);let e=0;for(const n of t)r([a.mergeSymbols,e,n]),e+=c}}};class i extends(r()){}const c=new i,a={addSymbol:c.addSymbol,fetchSymbol:c.fetchSymbol,getSymbol:c.getSymbol,mergeSymbol:c.mergeSymbol,mergeSymbols:c.mergeSymbols,symbol:c.symbol,symbols:c.symbols},l=a},248:(t,e,n)=>{n.d(e,{J:()=>o});var s=n(464);class o{context;diffs;constructor(t,e){this.context=t,this.diffs=e?.diffs||{}}changeComponent(t,e,n,s,o=!1){return this.upsertComponent(t,e,n,s,o)}getValue(t,e,n){const s=this.diffs[t]?.[e];return null==s?n:s}reset(t){return this.diffs=t?.diffs||{},this}upsertComponent(t,e,n,o,r=!1){this.diffs[t]=this.diffs[t]||{};const i=this.context.store.findComponents(t),c=[],a=o=>{if(null==o){this.diffs[t][e]=n;const s=this.context.store.storeComponent(t,e,n);return r&&s instanceof Promise&&c.push(s),n}let i=this.diffs[t];const a=(t,e,n,o)=>{let r=o;if(!n)return[e,r];const i=(0,s.typeOf)(n[t]),c=(0,s.typeOf)(r);if(i!==c)return e[t]=r,[e=e[t],r];switch(c){case"bigint":case"number":{const s=r-n[t];e[t]=s;break}case"array":e=e[t],n=n[t];for(let t=0;t<r.length;t+=1)a(t.toString(),e,n,r[t]);break;case"object":e=e[t],n=n[t];for(const t in r)a(t,e,n,r[t]);break;default:e[t]=r}return e=e[t],r=r[t],[e,o]};[i,n]=a(e,i,o,n);const l=this.context.store.storeComponent(t,e,n);return r&&l instanceof Promise&&c.push(l),n};return r&&i instanceof Promise?new Promise(((t,e)=>{i.then((s=>(a(s),0===c.length?Promise.all(c).then((()=>t(n)),e):t(n))))})):a(i)}}},852:(t,e,n)=>{n.d(e,{$B:()=>r,AX:()=>i,HK:()=>c,HQ:()=>d,Rb:()=>y,TT:()=>b,cP:()=>h,dz:()=>f,eX:()=>o,gx:()=>l,hh:()=>p,nb:()=>a,rN:()=>u,vC:()=>m,zA:()=>g});var s=n(464);const o=["actorInput","actors","addSymbol","batch","changeComponent","components","createEntity","entities","fetchSymbol","getSymbol","mergeActors","mergeComponents","mergeEntities","mergeSymbols","mergeSymbol","removeActor","removeComponent","removeEntity","spawnActor","symbol","symbols","upsertComponent"],r=["asset","collider","color","hidden","position","rotation","velocity","spin"],i=(0,s.unionSetOrArray)(o,r),c=0,a=(0,s.createEnum)(o,c),l=(0,s.createEnum)(r,o.length+c),u=(0,s.createEnum)(i,c),h={actorInput:{default:1,rollback:2},changeComponent:{default:3,ordered:4},mergeSymbols:2,removeComponent:2,upsertComponent:{default:3,ordered:4}},m={compressStringsAsInts:!0,enableRollback:!1,enableQuerying:!1,isAuthority:!0,isAsyncStorage:!1,isComponentRelay:!0,isDiffed:!1,isGroupedComponents:!1,isOrdered:!1,isReadOnly:!1,isSymbolLeader:!1,isSymbolRelay:!1,pageSize:100,skipPending:!1,indexes:{position:{type:"spatial"}},types:{asset:"str",collider:"str",color:["ui8",4],hidden:"bool",position:["f32",3],rotation:["f32",3],velocity:["f32",3],spin:["f32",3],size:["f32",3]}},p={mask:{actors:!0,entities:!0,components:!0,inputs:!0,symbols:!0}&&null,type:!0,batched:!0,batchSize:100},d={asset:!0,collider:!0,color:!0,hidden:!0,position:!0,rotation:!0,velocity:!0,spin:!0,size:!0};function f(){}function y(t,e){return t}function g(t,e,n,s){const o=n[s];return Array.isArray(o)?t.slice(e*o[1],(e+1)*o[1]):t[e]}function b(t,e,n){return t}},400:(t,e,n)=>{n.d(e,{_:()=>m});var s=n(248),o=n(77),r=n(343),i=n(745),c=n(131),a=n(883),l=n(699),u=n(464),h=n(568);class m{static ensure(t,e,n=l.Ke){return t instanceof m?t:new m(t,e,n)}constructor(t={},e,n=l.Ke){const{events:o=null,store:u=null,order:m=null,changes:p=null,symbols:d=null,pending:f=null}=t;e=r.E.ensure(e,e?.actions||h.allActions);const{isOrdered:y,isDiffed:g,isReadOnly:b,compressStringsAsInts:S,enableQuerying:A,enumDefaultSymbols:v,storeOptions:C,indexes:w,types:E}=e;this.order=y?new i.P(m):null,this.changes=g?new s.J(this,p):null,S?d?this.symbols=new a.vY(d):(this.symbols=new a.vY,this.symbols.copyEnum(v)):this.symbols=null,this.pending=b?null:f||new c.J(g),this.events=o,this.store=u||new n(void 0,{...C||{},types:E,indexes:A?w:null})}get actors(){const t=this.getActors(null,1/0);return t instanceof o.Q?t:t[0]}getActors(t,e){return this.store.getActors(t,e)}spawnActor(t,e){const{skipPending:n,isAsyncStorage:s,onUpdate:o}=e,r=this.store.storeActor(t),i=e=>{e&&(!n&&this.pending&&this.pending.spawnActor(t),this.events&&this.events.emit("spawnActor",t),o&&o())};return s&&r instanceof Promise?(r.then(i),r):(i(r),r)}removeActor(t,e){const{skipPending:n,isAsyncStorage:s,onUpdate:o}=e,r=this.store.destroyActor(t),i=e=>{e&&(!n&&this.pending&&this.pending.removeActor(t),this.events&&this.events.emit("removeActor",t),o&&o())};return s&&r instanceof Promise?(r.then(i),r):(i(r),r)}mergeActors(t,e){const{actions:n,isAsyncStorage:s,onUpdate:o}=e,r=e.extend({onUpdate:null}),i=[];for(const e of t){const t=n.spawnActor(e,this,r);s&&t instanceof Promise&&i.push(t)}const c=()=>{o&&o()};if(s&&i.length>0){const t=i.length?Promise.all(i):Promise.resolve([]);return t.then(c),t}c()}get entities(){const t=this.getEntities(null,1/0);return t instanceof o.Q?t:t[0]}getEntities(t,e){return this.store.getEntities(t,e)}createEntity(t,e){const{skipPending:n,isAsyncStorage:s,onUpdate:o}=e,r=this.store.storeEntity(t),i=e=>{e&&(!n&&this.pending&&this.pending.createEntity(t),this.events&&this.events.emit("createEntity",t),o&&o())};return s&&r instanceof Promise?(r.then(i),r):(i(r),r)}removeEntity(t,e){const{skipPending:n,isAsyncStorage:s,onUpdate:o}=e,r=this.store.destroyEntity(t),i=e=>{e&&(!n&&this.pending&&this.pending.removeEntity(t),this.events&&this.events.emit("removeEntity",t),o&&o())};return s&&r instanceof Promise?(r.then(i),r):(i(r),r)}mergeEntities(t,e){const{actions:n,isAsyncStorage:s,onUpdate:o}=e,r=e.extend({onUpdate:null}),i=[];for(const e of t){const t=n.createEntity(e,this,r);s&&t instanceof Promise&&i.push(t)}const c=()=>{o&&o()};if(s&&i.length>0){const t=i.length?Promise.all(i):Promise.resolve([]);return t.then(c),t}c()}get components(){const t=this.getComponents(null,1/0);return t instanceof o.Q?t:t[0]}getComponents(t,e){return this.store.getComponents(t,e)}changeComponent(t,e,n,s=0,o){const{actions:r,skipPending:i,isAsyncStorage:c,isGroupedComponents:a,getGroupedValue:l,types:h,onUpdate:m}=o,p=()=>{m&&m()};if(Array.isArray(t)||t instanceof Uint32Array){if(!a)throw new Error("Cannot change grouped components without isGroupedComponents option");const i=o.extend({onUpdate:null}),u=[];for(let o=0;o<t.length;o++){const a=l(n,o,h,e),m=r.changeComponent([t[o],e,a,s],this,i);c&&m instanceof Promise&&u.push(m)}if(c&&u.length>0){const t=u.length?Promise.all(u):Promise.resolve([]);return t.then(p),t}return void p()}const d=this.store.findComponent(t,e),f=o=>{const r=void 0===o?"created":"updated";if(this.order&&!this.order.changeComponent(t,e,s)&&!this.changes)return;let a;"created"===r?a=n:[,a]=(0,u.combineValues)(o,n);let l=null;l=this.changes?this.changes.changeComponent(t,e,a,n,c):this.store.storeComponent(t,e,a);const h=()=>{!i&&this.pending&&this.pending.changeComponent(r,t,e),this.events&&this.events.emit("changeComponent",t,e),p()};if(c&&l instanceof Promise)return l.then(h),l;h()};return c&&d instanceof Promise?(d.then(f),d):(f(d),d)}upsertComponent(t,e,n,s=0,o){const{actions:r,skipPending:i,isAsyncStorage:c,isGroupedComponents:a,getGroupedValue:l,types:u,onUpdate:h}=o,m=()=>{h&&h()};if(Array.isArray(t)||t instanceof Uint32Array){if(!a)throw new Error("Cannot upsert grouped components without isGroupedComponents option");const i=o.extend({onUpdate:null}),h=[];for(let o=0;o<t.length;o++){const a=l(n,o,u,e),m=r.upsertComponent([t[o],e,a,s],this,i);c&&m instanceof Promise&&h.push(m)}if(c&&h.length>0){const t=h.length?Promise.all(h):Promise.resolve([]);return t.then(m),t}return void m()}const p=this.store.findComponent(t,e),d=o=>{if(o!==n){if(this.order&&!this.order.upsertComponent(t,e,s)&&!this.changes)return;let r=null;r=this.changes?this.changes.upsertComponent(t,e,n,o,c):this.store.storeComponent(t,e,n);const a=()=>{if(!i&&this.pending){const n=void 0===o?"created":"updated";this.pending.upsertComponent(n,t,e)}this.events&&this.events.emit("upsertComponent",t,e),m()};if(c&&r instanceof Promise)return r.then(a),r;a()}};return c&&p instanceof Promise?(p.then(d),p):(d(p),p)}removeComponent(t,e,n){const{skipPending:s,isAsyncStorage:o,onUpdate:r}=n,i=this.store.findComponent(t,e),c=n=>(void 0!==n||null!==n)&&(this.store.destroyComponent(t,e),!s&&this.pending&&this.pending.removeComponent(t,e),this.events&&this.events.emit("removeComponent",t,e),r&&r(),!0);return o&&i instanceof Promise?new Promise(((t,e)=>{i.then((e=>{t(c(e))}),e)})):c(i)}mergeComponents(t,e){const{actions:n,isAsyncStorage:s,isComponentRelay:o,onUpdate:r}=e,i=e.extend({skipPending:!o,onUpdate:null}),c=[];for(const e in t??{})for(const s in t[e]){const o=[e,s,t[e][s]],r=n.upsertComponent(o,this,i);r instanceof Promise&&c.push(r)}const a=()=>{r&&r()};if(s&&c.length>0){const t=c.length?Promise.all(c):Promise.resolve([]);return t.then(a),t}a()}get inputs(){const t=this.getInputs(null,1/0);return t instanceof o.Q?t:t[0]}getInputs(t,e){return this.store.getInputs(t,e)}actorInput(t,e,n=0,s){const{skipPending:o,isAsyncStorage:r,enableRollback:i,onUpdate:c}=s;n=i?n||(0,u.now)():0;const a=this.store.storeInput(t,e,n),l=s=>{!o&&this.pending&&this.pending.actorInput(t,s),this.events&&this.events.emit("actorInput",t,e,s,n),c&&c()};return r&&a instanceof Promise?(a.then(l),a):(l(a),a)}get symbolsList(){return this.symbols?.getSymbols()}get symbolsEnum(){return this.symbols?.getSymbolsEnum()}setSymbols(t){this.symbols?.reset(t)}getSymbol(t,e){const{actions:n}=e,s=this.symbols?.get(t);return s||n.fetchSymbol(s,this,e)[0]}addSymbol(t,e){if(null===this.symbols)return null;const{actions:n,isSymbolLeader:s,skipPending:o,onUpdate:r}=e,i=this.symbolsEnum??{};let c=Object.prototype.hasOwnProperty.call(i,t)?i[t]:-1;return-1===c&&(s?(c=this.symbols.add(t)??-1,!o&&this.pending&&this.pending.addSymbol([t,c]),r&&r()):n.fetchSymbol&&(c=n.fetchSymbol(t,this,e)[1])),-1===c?null:c}fetchSymbol(t,e,n){if(null===this.symbols)return null;const{isSymbolLeader:s,skipPending:o,onUpdate:r}=e,i=this.symbols.fetch(t);if(i[0]&&-1!==i[1])n&&n(i);else if(s){const t=this.symbols.add(i[0]);i[1]=t,!o&&this.pending&&this.pending.addSymbol(i),r&&r()}return i}mergeSymbol(t,e){if(null===this.symbols)return null;const{isSymbolLeader:n,isSymbolRelay:s,skipPending:o,onUpdate:r}=e;this.symbols.merge(t),(n||s)&&!o&&this.pending&&this.pending.addSymbol(t),r&&r()}resetSymbols(t=0,e,n){if(null===this.symbols)return null;const{isSymbolLeader:s,isSymbolRelay:o,skipPending:r,onUpdate:i}=n;this.symbols.reset(t,e),(s||o)&&!r&&this.pending&&this.pending.replaceSymbols(t,e),i&&i()}resetFrame(){this.pending&&this.pending.reset(),this.order&&this.order.reset(),this.changes&&this.changes.reset()}}},77:(t,e,n)=>{n.d(e,{Q:()=>s});class s{handlers;emissions;handlersDone;emissionsDone;constructor(t=[],e=!1,n=[],s=!1){this.handlers=n,this.emissions=t;for(const t of this.handlers)for(const e of this.emissions)t(e);this.handlersDone=e,this.emissionsDone=s,this.cleanup()}cleanup(){this.handlersDone&&this.emissionsDone&&this.clear()}clear(){this.handlers=[],this.emissions=[],this.handlersDone=!1,this.emissionsDone=!1}done(t=!0,e=!0){this.handlersDone=t,this.emissionsDone=e,this.cleanup()}emitTo(t,e=!1){this.handlers.push(t);for(const e of this.emissions)t(e);this.handlersDone=e,this.cleanup()}emit(t,e=!1){this.emissions.push(t);for(const e of this.handlers)e(t);this.emissionsDone=e,this.cleanup()}removeHandler(t){const e=this.handlers.indexOf(t);-1!==e&&this.handlers.splice(e,1)}removeEmission(t){const e=this.emissions.indexOf(t);-1!==e&&this.emissions.splice(e,1)}}},833:(t,e,n)=>{n.d(e,{RW:()=>p,ZP:()=>d,dE:()=>a,e6:()=>l,i$:()=>u,p0:()=>m,yf:()=>h});var s=n(400),o=n(343),r=n(699),i=n(290),c=n(464);function a(t,e){return e&&"number"==typeof t&&e[t]&&(t=e[t]),t}function l(t,e){e=e instanceof o.E?e:new o.E(e);const{actions:n,defaultSymbols:s}=e;return o=>{o=a(o,s);const r=s=>{n[o]&&n[o](s,t,e)};return r.action=o,r}}function u(t,e,n){const s=l(e,n=n instanceof o.E?n:new o.E(n));Array.isArray(t)?s(t[0])(t[1]):t&&s(t.action)(t.payload)}const h=m;function m(t,e,n){n=n instanceof o.E?n:new o.E(n);const{batchActionPayloadSizes:s,isOrdered:r,enableRollback:i}=n,c=l(e,n),a=(t,o,c=0)=>{const a=o.action;let l=s[a]||1;l&&"object"==typeof l&&(l=l.ordered&&r?l.ordered:l.rollback&&i?l.rollback:l.default);for(let r=c;r<t.length;r+=l)1===l?o(t[r],e,n):s&&o(t.slice(r,r+l),e,n)};if(Array.isArray(t))a(t,c(t[0]),1);else if(t){const e=c(t.action);a(t.payload,e)}}class p{context;options;constructor(t,e,n,i=r.Ke){this.options=o.E.ensure(e,n),this.context=s._.ensure(t,e,i)}one(t,e){return u(t,this.context,e?this.options.extend(e):this.options)}many(t,e){return m(t,this.context,e?this.options.extend(e):this.options)}getActionHandler(){return l(this.context,this.options)}getSymbolAction(t){return a(t,this.options.defaultSymbols)}updater(t,e=(0,c.now)()){return(0,i.M)(this.context,t?this.options.extend(t):this.options,e)}spawnActor(t,e){return this.context.spawnActor(t,e?this.options.extend(e):this.options)}removeActor(t,e){return this.context.removeActor(t,e?this.options.extend(e):this.options)}actorInput(t,e,n=(0,c.now)(),s){return this.context.actorInput(t,e,n,s?this.options.extend(s):this.options)}createEntity(t,e){return this.context.createEntity(t,e?this.options.extend(e):this.options)}removeEntity(t,e){return this.context.removeEntity(t,e?this.options.extend(e):this.options)}upsertComponent(t,e,n,s=(0,c.now)(),o){return this.context.upsertComponent(t,e,n,s,o?this.options.extend(o):this.options)}changeComponent(t,e,n,s=(0,c.now)(),o){return this.context.changeComponent(t,e,n,s,o?this.options.extend(o):this.options)}removeComponent(t,e,n){return this.context.removeComponent(t,e,n?this.options.extend(n):this.options)}queryComponents(t){return this.context.store.queryComponents(t)}}const d=p},240:(t,e,n)=>{n.d(e,{g:()=>s});class s{items;constructor(t=null,e={}){this.items=t}clear(){this.items=null}clone(){return new s(this.items)}get(t){}has(t,e){return!1}remove(t,e){}set(t,e){return null}store(t,e,n){return e&&this.remove(e,t),this.set(n,t)}query(t){return[]}}},96:(t,e,n)=>{n.d(e,{H:()=>r});var s=n(240),o=n(464);class r extends s.g{constructor(t=[],e={}){super(t)}clear(){this.items=[]}clone(){return new r(this.items)}get(t){const e=this.items.find((e=>e[0]===t));return e?e[1]:[]}has(t,e){const n=this.items.find((e=>e[0]===t));return void 0===e?!!n:!!n&&-1!==n[1].indexOf(e)}remove(t,e){const n=function(t,e,n){const s=(0,o.binaryInsert)(t,e,(t=>t[0])),r=t[s];if(r[0]===e){const e=r[1],o=e.lastIndexOf(n);if(-1!==o)return e.splice(o,1),0===e.length&&t.splice(s,1),[s,o]}return[-1,-1]}(this.items,t,e);return n}set(t,e){const n=function(t,e,n){const s=(0,o.binaryInsert)(t,e,(t=>t[0])),r=t[s];if(r[0]!==e){const o=[n];return t.splice(s,0,[e,o]),[s,0]}{const t=r[1];if(-1===t.indexOf(n))return t.push(n),[s,t.length-1]}return[-1,-1]}(this.items,t,e);return n}query(t){return this.get(t)}}},175:(t,e,n)=>{n.d(e,{x:()=>r});var s=n(240),o=n(464);class r extends s.g{constructor(t=[],{cellSize:e=5}={}){super(t),this.cellSize=e}clear(){this.items=[]}clone(){return new r(this.items)}get(t){const e=this.hash(t);this.items[e]=this.items[e]||[];return this.items[e]||[]}has(t,e){const n=this.hash(t);this.items[n]=this.items[n]||[];const s=this.items[n];return void 0===e?!!s:!!s&&-1!==s.indexOf(e)}hash(t){return 2===t.length?this.hash2d(t[0],t[1]):this.hash3d(t[0],t[1],t[2])}hash2d(t=0,e=0){return 73856093*Math.floor((t+1e3)/this.cellSize)^19349663*Math.floor((e+1e3)/this.cellSize)}hash3d(t=0,e=0,n=0){return 73856093*Math.floor((t+1e3)/this.cellSize)^19349663*Math.floor((e+1e3)/this.cellSize)^83492791*Math.floor((n+1e3)/this.cellSize)}remove(t,e){const n=this.hash(t);this.items[n]=this.items[n]||[];const s=this.items[n],[r]=(0,o.binarySearch)(s,e);return-1===r&&s.splice(r,1),0===s.length&&delete this.items[n],[n,r]}set(t,e){const n=this.hash(t);this.items[n]=this.items[n]||[];const s=this.items[n],[r,i]=(0,o.binarySearch)(s,e);return-1===r&&s.splice(i,0,e),[n,r]}query(t){let e=[];const n=this.cellSize;if(2==(2===t.length?2:3)){const[s,o]=t;for(let t=2*-n;t<2*n+n;t+=n)for(let r=2*-n;r<2*n+n;r+=n){const n=this.items[this.hash2d(s+t,o+r)];void 0!==n&&(e=e.concat(n))}}else{const[s,o,r]=t;for(let t=2*-n;t<2*n+n;t+=n)for(let i=2*-n;i<2*n+n;i+=n)for(let c=2*-n;c<2*n+n;c+=n){const n=this.items[this.hash3d(s+t,o+i,r+c)];void 0!==n&&(e=e.concat(n))}}return e}}},568:(t,e,n)=>{n.r(e),n.d(e,{AllActionsFactory:()=>a,NodeActions:()=>u,actions:()=>m,allActions:()=>l,default:()=>p});var s=n(329),o=n(730),r=n(982),i=n(787),c=n(694);function a(t=Object){return(0,s.ActorActionsFactory)((0,o.ComponentActionsFactory)((0,r.CoreActionsFactory)((0,i.EntityActionsFactory)((0,c.SymbolActionsFactory)(t)))))}const l={...s.default,...o.default,...r.default,...i.default,...c.default};class u extends(a()){}const h=new u,m={actorInput:h.actorInput,actors:h.actors,mergeActors:h.mergeActors,removeActor:h.removeActor,spawnActor:h.spawnActor,changeComponent:h.changeComponent,components:h.components,mergeComponents:h.mergeComponents,removeComponent:h.removeComponent,upsertComponent:h.upsertComponent,batch:h.batch,createEntity:h.createEntity,entities:h.entities,mergeEntities:h.mergeEntities,removeEntity:h.removeEntity,addSymbol:h.addSymbol,fetchSymbol:h.fetchSymbol,getSymbol:h.getSymbol,mergeSymbol:h.mergeSymbol,mergeSymbols:h.mergeSymbols,symbol:h.symbol,symbols:h.symbols},p=m},343:(t,e,n)=>{n.d(e,{E:()=>r});var s=n(852),o=n(568);class r{actions;batchActionPayloadSizes;compressStringsAsInts;defaultSymbols;enableRollback;enableQuerying;enumDefaultSymbols;getActorId;getGroupedValue;indexes;isAuthority;isAsyncStorage;isComponentRelay;isDiffed;isGroupedComponents;isOrdered;isReadOnly;isSymbolLeader;isSymbolRelay;onUpdate;pageSize;responder;skipPending;types;setGroupedValue;storeOptions;updateOptions;worldOptions;static ensure(t={},e){return t instanceof r?t:new r(t,e)}constructor(t={},e=null){const{actions:n=e||o.actions,batchActionPayloadSizes:r=s.cP,compressStringsAsInts:i=s.vC.compressStringsAsInts,defaultSymbols:c=s.AX,enableRollback:a=s.vC.enableRollback,enableQuerying:l=s.vC.enableQuerying,enumDefaultSymbols:u=s.rN,getActorId:h=s.Rb,getGroupedValue:m=s.zA,indexes:p=s.vC.indexes,isAuthority:d=s.vC.isAuthority,isAsyncStorage:f=s.vC.isAsyncStorage,isComponentRelay:y=s.vC.isComponentRelay,isDiffed:g=s.vC.isDiffed,isGroupedComponents:b=s.vC.isGroupedComponents,isOrdered:S=s.vC.isOrdered,isReadOnly:A=s.vC.isReadOnly,isSymbolLeader:v=s.vC.isSymbolLeader,isSymbolRelay:C=s.vC.isSymbolRelay,onUpdate:w=null,pageSize:E=s.vC.pageSize,responder:x=s.dz,skipPending:O=s.vC.skipPending,types:P=s.vC.types,setGroupedValue:I=s.TT,storeOptions:k={},updateOptions:_={},worldOptions:j=null}=t,D={...s.hh,..._};D.validKeys=_?.validKeys?{...s.HQ,..._?.validKeys||{}}:null,this.actions=n,this.batchActionPayloadSizes=r,this.compressStringsAsInts=i,this.defaultSymbols=c,this.enableRollback=a,this.enableQuerying=l,this.enumDefaultSymbols=u,this.getActorId=h,this.getGroupedValue=m,this.indexes=p,this.isAuthority=d,this.isAsyncStorage=f,this.isComponentRelay=y,this.isDiffed=g,this.isGroupedComponents=b,this.isOrdered=S,this.isReadOnly=A,this.isSymbolLeader=v,this.isSymbolRelay=C,this.onUpdate=w,this.pageSize=E,this.responder=x,this.skipPending=O,this.types=P,this.setGroupedValue=I,this.storeOptions=k,this.updateOptions=D,this.worldOptions=j}clone(){return new r({...this},this.actions)}extend(t,e=this.actions){return new r({...this,...t},e)}}},745:(t,e,n)=>{n.d(e,{P:()=>o});var s=n(464);class o{order;constructor(t={}){this.order=t}changeComponent(t,e,n){return this.upsertComponent(t,e,n)}reset(t={}){this.order=t}upsertComponent(t,e,n){if(isNaN(n))return!1;if(this.order=this.order||{},this.order[t]=this.order[t]||{},"number"==typeof this.order[t][e]){if(isFinite(this.order[t][e])&&this.order[t][e]<=n){const o=0;return!(n>(0,s.now)()+o||(this.order[t][e]=n,0))}return!1}return this.order[t][e]=n,!0}}},131:(t,e,n)=>{n.d(e,{J:()=>s});class s{constructor(t=!1){this.created={actors:{},components:{},entities:[],inputs:{}},this.removed={actors:{},components:{},entities:[]},this.updated={components:{}},this.symbols=[],this.isDiffed=t}actorInput(t,e){this.created.inputs[t]=this.created.inputs[t]||[],this.created.inputs[t].push(e)}changeComponent(t,e,n){return this.upsertComponent(t,e,n)}createEntity(t){this.created.entities.push(t)}removeActor(t){this.removed.actors[t]=!0}removeComponent(t,e){this.removed.components[t]=this.removed.components[t]||{},this.removed.components[t][e]=!0}removeEntity(t){this.removed.entities.push(t)}reset(){this.constructor()}spawnActor(t){this.created.actors[t]=!0}upsertComponent(t,e,n){const s="created"===t?this.created:this.updated;if(s){if("updated"===t&&this.created.components[e]&&this.created.components[e][n])return;s.components[e]=s.components[e]||{},s.components[e][n]=!0}}addSymbol(t){this.symbols.push(t)}replaceSymbols(t,e){if(t>0){const{length:n}=e,{symbols:s}=this;for(let o=0;o<n;o++){const n=e[o],r=o+t;s[r]=[n,r]}}else this.symbols=e.map(((t,e)=>[t,e]))}}},699:(t,e,n)=>{n.d(e,{n8:()=>l,Ke:()=>h,gW:()=>u});var s=n(96),o=n(175),r=n(240),i=n(464);class c extends r.g{constructor(t={},e={}){super(t)}clear(){this.items={}}clone(){return new r.g(this.items)}get(t){return this.items[t]}has(t,e){const n=this.items[t];return!(!n||!n.has(e))}remove(t,e){const n=this.items[t];if(n&&n.has(e))return n.delete(e),!0}set(t,e){return this.items[t]=this.items[t]||new Set,!this.items[t].has(e)&&(this.items[t].add(e),!0)}union(t,e){return new c({...this.items,[t]:(0,i.unionSets)(this.items[t],e.items[t])})}difference(t,e){return new c({...this.items,[t]:(0,i.differenceSets)(this.items[t],e.items[t])})}intersection(t,e){return new c({...this.items,[t]:(0,i.intersectionSets)(this.items[t],e.items[t])})}query(t){const{with:e,without:n}=t||{};let s=new Set;if(e)for(const t of e){const e=this.items[t];e&&(s=(0,i.unionSets)(s,e))}if(n)for(const t of n){const e=this.items[t];e&&(s=(0,i.differenceSets)(s,e))}return s}}var a=n(174);const l={sorted:s.H,spatial:o.x};function u(t={},e={},n={}){const{actors:s=[],entities:o=[],components:r={},inputs:i={}}=e||{},{types:u={},indexes:h={}}=n;t.actors=s||[],t.entities=o||[],t.components=r||{},t.inputs=i||{},t.types=u,t.typeCtors={};for(let e in u){let n=u[e];Array.isArray(n)?n=a.E.get(n[0])||a.X.get(n[0]):"string"==typeof n&&(n=a.E.get(n)||a.X.get(n)),"function"==typeof n&&n&&(t.typeCtors[e]=n)}t.componentsIndex=new c,t.indexes={};for(let e in h){const{type:n}=h[e],s=l[n];s&&(t.indexes[e]={actors:new s([],h[e]),entities:new s([],h[e])})}return t}class h{constructor(t={},e={}){u(this,t,e)}destroyActor(t){const e=this.actors;return this.destroyId(e,t)}destroyComponent(t,e){const n=this.components[t][e];delete this.components[t][e],this.removeComponentsIndex(t,e,n)}destroyEntity(t){const e=this.entities;return this.destroyId(e,t)}destroyId(t,e){const[n]=(0,i.binarySearch)(t,e);return-1!==n&&(t.splice(n,1),!0)}findComponents(t){return this.components[t]=this.components[t]||{},this.components[t]}findComponent(t,e){return this.components[t]=this.components[t]||{},this.components[t][e]}findInputs(t){return this.inputs[t]}findInput(t,e){this.inputs[t]=this.inputs[t]||[];const n=this.inputs[t][e];return Array.isArray(n)?[{...n[0],id:t},n[1]]:{...n,id:t}}getActors(t=null,e=1/0){if(null!==t){let n={};for(let e in t){const s=this.indexes[e];s&&s.actors.query(t[e]).forEach((t=>{n[t]=!0}))}const s=Object.keys(n);return(0,i.paginate)(s,e)}return(0,i.paginate)(this.actors,e)}getComponents(t=null,e=1/0){let n=this.components;if(null!==t){const e={};for(let n of t)e[n]=this.components[n];n=e}const s=Object.keys(n);return(0,i.paginate)(s,e).map((t=>{const e={};for(let s of t)e[s]=n[s];return e}))}getEntities(t=null,e=1/0){if(null!==t){let n={};for(let e in t){const s=this.indexes[e];s&&s.entities.query(t[e]).forEach((t=>{n[t]=!0}))}const s=Object.keys(n);return(0,i.paginate)(s,e)}return(0,i.paginate)(this.entities,e)}getInputs(t=null,e=1/0){let n=this.inputs;if(null!==t){const e={};for(let n of t)e[n]=this.inputs[n];n=e}const s=Object.keys(n);return(0,i.paginate)(s,e).map((t=>{const e={};for(let s of t)e[s]=n[s];return e}))}isActor(t){return-1!==this.actors.indexOf(t)}isEntity(t){return-1!==this.entities.indexOf(t)}setActors(t){return this.actors=t,t}setComponents(t){return this.components=t,t}setEntities(t){return this.entities=t,t}setInputs(t){return this.inputs=t,t}storeActor(t){const e=this.actors;return this.storeId(e,t)}storeComponent(t,e,n){const s=this.components[t][e];this.components[t][e]=n,this.updateComponentsIndex(t,e,s,n)}storeEntity(t){const e=this.entities;return this.storeId(e,t)}storeId(t,e){const[n,s]=(0,i.binarySearch)(t,e);return-1===n&&(t.splice(s,0,e),!0)}storeInput(t,e,n=0){const s=this.inputs;s[t]=s[t]||[];const o=s[t].length;return e.id===t&&delete e.id,s[t].push(n?[e,n]:e),o}queryComponents(t){return this.componentsIndex.query(t)}removeComponentsIndex(t,e,n){if(this.componentsIndex.remove(t,e),this.indexes[e]){const s=this.indexes[e];this.isActor(t)?s.actors.remove(t,n):s.entities.remove(t,n)}}updateComponentsIndex(t,e,n,s){if(this.componentsIndex.set(t,e),this.indexes[e]){const o=this.indexes[e];this.isActor(t)?o.actors.store(t,n,s):o.entities.store(t,n,s)}}}},883:(t,e,n)=>{n.d(e,{R$:()=>a,dB:()=>r,s9:()=>i,vX:()=>c,vY:()=>o});var s=n(464);class o{_list;_enum;constructor(t={}){const{_list:e=[]}=t;this._list=e,this._enum=(0,s.createEnum)(e)}add(t){if(t){if(Object.prototype.hasOwnProperty.call(this._enum,t))return this._enum[t];{const e=this._list.length;return this._list[e]=t,this._enum[t]=e,e}}return null}copyEnum(t={}){for(const e of Object.entries(t))this.merge(e)}fetch(t){let e,n;switch(typeof t){case"number":e=t,n=this._list[e]||"";break;case"string":n=t,e=Object.prototype.hasOwnProperty.call(this._enum,n)?this._enum[n]:-1}return[n,e]}find(t){return this._enum[t]}get(t){return this._list[t]}getSymbols(){return this._list}getSymbolsEnum(){return this._enum}merge(t){const[e,n]=t;this._list[n]=e,this._enum[e]=n}reset(t,e=[]){if(t>0){const{length:n}=e,{_list:s}=this,{_enum:o}=this;for(let r=0;r<n;r++){const n=e[r],i=r+t;s[i]=n,o[n]=i}}else this._list=e,this._enum=(0,s.createEnum)(e)}}function r(t,e,n){if("number"==typeof t){const{actions:s}=n,{getSymbol:o}=s,r=o(t,e,n);if(!r)return"";t=r}return t}function i(t,e,n){if("string"==typeof t){const{actions:s}=n,{addSymbol:o}=s,r=o(t,e,n);if("number"==typeof r)return r}return t}function c(t,e,n,s){if("$"===t.charAt(0)){const{actions:t}=s,{getSymbol:o}=t,r=t=>{if(!Array.isArray(t)){switch(typeof t){case"number":{const e=o(t,n,s);e&&(t=e);break}case"object":for(const e in t)t[e]=r(t[e])}return t}t=t.map(r)};return r(e)}return e}function a(t,e,n,s){if("$"===t.charAt(0)){const{actions:t}=s,{addSymbol:o}=t,r=t=>{if(!Array.isArray(t)){switch(typeof t){case"string":{const e=o(t,n,s);"number"==typeof e&&(t=e);break}case"object":for(const e in t)t[e]=r(t[e])}return t}t=t.map(r)};return r(e)}return e}},174:(t,e,n)=>{n.d(e,{E:()=>s,X:()=>o});const s=new Map([["str",String],["num",Number],["bool",Boolean],["map",Map],["set",Set],["arr",Array]]),o=new Map([["i8",Int8Array],["ui8",Uint8Array],["ui8c",Uint8ClampedArray],["i16",Int16Array],["ui16",Uint16Array],["i32",Int32Array],["ui32",Uint32Array],["f32",Float32Array],["f64",Float64Array]])},290:(t,e,n)=>{n.d(e,{M:()=>c});var s=n(343),o=n(883),r=n(174),i=n(464);async function c(t,e,n=(0,i.now)()){e=e instanceof s.E?e:new s.E(e);const{responder:c,enumDefaultSymbols:a,compressStringsAsInts:l,enableRollback:u,isOrdered:h,isDiffed:m,isGroupedComponents:p,isAsyncStorage:d,types:f,setGroupedValue:y,updateOptions:g}=e,{batched:b,batchSize:S,mask:A,type:v,validKeys:C}=g;if(!t.pending)return[];const w=[];let E=[];const{created:x={},removed:O={},symbols:P=[],updated:I={}}=t.pending,k=t.store,_=t=>{b&&E.length&&(w.push([t,...E]),E=[])},j=(n,s)=>{b?(E=E.concat(s),E.length>=S&&_(n)):(l&&(n=(0,o.s9)(n,t,e)),c([n,s],v))},D=n=>(l&&(n=(0,o.s9)(n,t,e)),n),R=async(s={},c)=>{const u=p?{}:null;for(const p in s??{}){if(!(d?await k.findComponents(p):k.findComponents(p)))break;const g=s?s[p]:{};for(const s in g??{}){if(C&&!C[s])break;const g=f[s]??null,b=g?r.X.get(Array.isArray(g)?g[0]:g):null;let S=null;u&&(S=u[s]=u[s]??{key:s,ids:l?new Uint32Array(0):[],intIds:!0,values:b?new b(0):[],ticks:new Uint32Array(0)});let A=d?await k.findComponent(p,s):k.findComponent(p,s);m&&t.changes&&"updated"===c&&(A=t.changes.getValue(p,s,A)),l&&(A=(0,o.R$)(s,A,t,e));const v=D(p),w=D(s);if(u){S.ids=l?(0,i.concatTypedArray)(S.ids,[v]):S.ids.concat([p]),v===p&&(S.intIds=!1),S.values=b?(0,i.concatTypedArray)(S.values,y(A,f,s)):S.values.concat(y(A,f,s)),h&&(S.ticks=(0,i.concatTypedArray)(S.ticks,[m?-n:n]));continue}const E=[v,w,A];h&&E.push(m?-n:n),j(m?a.changeComponent:a.upsertComponent,E)}}if(u)for(const t in u){const e=u[t],n=l&&e.intIds?new Uint32Array(e.ids):e.ids,s=f[t]??null,o=s?r.X.get(Array.isArray(s)?s[0]:s):null,i=o?new o(e.values):e.values;let c=0;const p=n.length;for(;c<p;c+=S){const t=[n.slice(c,c+S),e.key,i.slice(c,c+S)];if(h){const n=new Uint32Array(e.ticks.slice(c,c+S));t.push(n)}j(m?a.changeComponent:a.upsertComponent,t)}}_(m?a.changeComponent:a.upsertComponent)};if(!A||!A.entities){for(const t of x.entities??[]){const e=D(t);j(a.createEntity,e)}_(a.createEntity),x.entities=[]}if(!A||!A.actors){for(const t in x.actors??{}){const e=D(t);j(a.spawnActor,e)}_(a.spawnActor),x.actors={}}if(!A||!A.entities){for(const t of O.entities??[]){const e=D(t);j(a.removeEntity,e)}_(a.removeEntity),O.entities=[]}if(!A||!A.actors){for(const t in O.actors??{}){const e=D(t);j(a.removeActor,e)}_(a.removeActor),O.actors={}}if(!A||!A.components){for(const t in O.components??{}){const e=O?.components?O.components[t]:null;if(!e)break;const n=D(t);for(const t in e){if(C&&!C[t])break;const e=[n,D(t)];j(a.removeComponent,e)}}_(a.removeComponent),O.components={}}if(!A||!A.components){const t=R(x.components,"created");x.components={},await t}if(!A||!A.components){const t=R(I.components,"updated");I.components={},await t}if(!A||!A.inputs){for(const t in x.inputs??{}){const e=x?.inputs?x.inputs[t]??[]:[];for(let s=0;s<e.length;s+=1){const o=e[s],r=d?await k.findInput(t,o):k.findInput(t,o),i=Array.isArray(r),c=i?r[0]:r,l=i?r[1]:n;j(a.actorInput,i||u?[c,l]:c)}}_(a.actorInput),x.inputs={}}if(!A||!A.symbols){for(const t of P){if(b)E.push(t);else{const e=[a.mergeSymbol,t];await c(e,v)}E.length>=S&&E.length&&(w.unshift([a.mergeSymbol].concat(E)),E=[])}b&&E.length&&(w.unshift([a.mergeSymbol].concat(E)),E=[]),t.pending.symbols=[]}if(b&&w.length)for(let t=0;t<w.length;t+=1){const e=w[t];e&&await c([a.batch,e])}return w}},464:(t,e,n)=>{function s(){return performance.timeOrigin+performance.now()}function o(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(Array.isArray(t)){const n=new e.constructor(t.length);n.set(t),t=n}else if(Array.isArray(e)){const n=new t.constructor(e.length);n.set(e),e=n}const n=new t.constructor(t.length+e.length);return n.set&&(n.set(t),n.set(e,t.length)),n}function r(...t){const e={};for(const n of t)if(n)for(const t of n)e[t]=!0;return Object.keys(e)}function i(t,e){if("function"==typeof t.union)return t.union(t);const n=new Set;for(const e of t)n.add(e);for(const t of e)n.add(t);return n}function c(t,e){if("function"==typeof t.difference)return t.difference(t);const n=new Set;for(const s of t)e.has(s)||n.add(s);return n}function a(t,e){if("function"==typeof t.intersection)return t.intersection(t);const n=new Set;for(const s of t)e.has(s)&&n.add(s);return n}function l(t,e,n=(t=>t)){let s=0,o=t.length;for(;s<o;){const r=s+o>>>1;n(t[r])<e?s=r+1:o=r}return s}function u(t,e,n=(t=>t)){let s=0,o=t.length-1;for(;s<=o;){const r=s+o>>>1,i=n(t[r]);if(i===e)return[r,s];i<e?s=r+1:o=r-1}return[-1,s]}function h(t,e=0){const n={};let s=e;if(t)for(const e of t)n[e]=s++;return n}function m(t){return[t?.action,t?.payload]}function p(t,e){if(e===1/0&&Array.isArray(t)&&t.length>0)return[t];const n=[];let s=[],o=0;for(const r of t)o>=e&&(n.push(s),s=[],o=0),s.push(r),o++;return s.length>0&&n.push(s),n}function d(t){const e=typeof t;if("object"===e){if(!t)return"null";if(Array.isArray(t))return"array"}return e}function f(t,e){return y(t,e)}function y(t,e){const n=d(t);switch(d(e)){case"bigint":case"number":return"number"!==n&&"bigint"!==n?[!1,e]:[!0,t+e];case"array":{if("array"!==n)return[!1,e];const s=[];let o=!0;for(let n=0;n<e.length;n+=1){const[r,i]=y(t[n],e[n]);s[n]=i,!1===r&&(o=!1)}return[o,s]}case"object":{if("object"!==n)return[!1,e];const s={};let o=!0;for(const n in e){const[r,i]=y(t[n],e[n]);!1===r&&(o=!1),s[n]=i}return[o,s]}default:return[!1,e]}}n.r(e),n.d(e,{binaryInsert:()=>l,binarySearch:()=>u,combineValues:()=>f,concatTypedArray:()=>o,createEnum:()=>h,differenceSets:()=>c,intersectionSets:()=>a,messageTuple:()=>m,now:()=>s,paginate:()=>p,recursiveCombination:()=>y,typeOf:()=>d,unionSetOrArray:()=>r,unionSets:()=>i})}},u={};function h(t){var e=u[t];if(void 0!==e)return e.exports;var n=u[t]={exports:{}};return l[t](n,n.exports,h),n.exports}h.m=l,t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",s=t=>{t&&!t.d&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},h.a=(o,r,i)=>{var c;i&&((c=[]).d=1);var a,l,u,h=new Set,m=o.exports,p=new Promise(((t,e)=>{u=e,l=t}));p[e]=m,p[t]=t=>(c&&t(c),h.forEach(t),p.catch((t=>{}))),o.exports=p,r((o=>{var r;a=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[t])return o;if(o.then){var r=[];r.d=0,o.then((t=>{i[e]=t,s(r)}),(t=>{i[n]=t,s(r)}));var i={};return i[t]=t=>t(r),i}}var c={};return c[t]=t=>{},c[e]=o,c})))(o);var i=()=>a.map((t=>{if(t[n])throw t[n];return t[e]})),l=new Promise((e=>{(r=()=>e(i)).r=0;var n=t=>t!==c&&!h.has(t)&&(h.add(t),t&&!t.d&&(r.r++,t.push(r)));a.map((e=>e[t](n)))}));return r.r?l:i()}),(t=>(t?u(p[n]=t):l(m),s(c)))),c&&(c.d=0)},o=[],h.O=(t,e,n,s)=>{if(!e){var r=1/0;for(l=0;l<o.length;l++){for(var[e,n,s]=o[l],i=!0,c=0;c<e.length;c++)(!1&s||r>=s)&&Object.keys(h.O).every((t=>h.O[t](e[c])))?e.splice(c--,1):(i=!1,s<r&&(r=s));if(i){o.splice(l--,1);var a=n();void 0!==a&&(t=a)}}return t}s=s||0;for(var l=o.length;l>0&&o[l-1][2]>s;l--)o[l]=o[l-1];o[l]=[e,n,s]},i=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,h.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var n=Object.create(null);h.r(n);var s={};r=r||[null,i({}),i([]),i(i)];for(var o=2&e&&t;"object"==typeof o&&!~r.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>t[e]));return s.default=()=>t,h.d(n,s),n},h.d=(t,e)=>{for(var n in e)h.o(e,n)&&!h.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},h.f={},h.e=t=>Promise.all(Object.keys(h.f).reduce(((e,n)=>(h.f[n](t,e),e)),[])),h.u=t=>t+".echo-d.min.js",h.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),h.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),c={},a="echoD:",h.l=(t,e,n,s)=>{if(c[t])c[t].push(e);else{var o,r;if(void 0!==n)for(var i=document.getElementsByTagName("script"),l=0;l<i.length;l++){var u=i[l];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==a+n){o=u;break}}o||(r=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,h.nc&&o.setAttribute("nonce",h.nc),o.setAttribute("data-webpack",a+n),o.src=t),c[t]=[e];var m=(e,n)=>{o.onerror=o.onload=null,clearTimeout(p);var s=c[t];if(delete c[t],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((t=>t(n))),e)return e(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),r&&document.head.appendChild(o)}},h.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;h.g.importScripts&&(t=h.g.location+"");var e=h.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&!t;)t=n[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),h.p=t})(),(()=>{var t={647:0};h.f.j=(e,n)=>{var s=h.o(t,e)?t[e]:void 0;if(0!==s)if(s)n.push(s[2]);else{var o=new Promise(((n,o)=>s=t[e]=[n,o]));n.push(s[2]=o);var r=h.p+h.u(e),i=new Error;h.l(r,(n=>{if(h.o(t,e)&&(0!==(s=t[e])&&(t[e]=void 0),s)){var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;i.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",i.name="ChunkLoadError",i.type=o,i.request=r,s[1](i)}}),"chunk-"+e,e)}},h.O.j=e=>0===t[e];var e=(e,n)=>{var s,o,[r,i,c]=n,a=0;if(r.some((e=>0!==t[e]))){for(s in i)h.o(i,s)&&(h.m[s]=i[s]);if(c)var l=c(h)}for(e&&e(n);a<r.length;a++)o=r[a],h.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return h.O(l)},n=Object("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).webpackChunkechoD=Object("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).webpackChunkechoD||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var m={};return(()=>{h.r(m),h.d(m,{Actions:()=>e.eX,Actor:()=>w,ArrayTypes:()=>y.X,BasicTypes:()=>y.E,Changes:()=>r.J,Client:()=>t,CommonComponents:()=>e.$B,Component:()=>E,Context:()=>i._,Core:()=>x,DefaultSymbols:()=>e.AX,Emitter:()=>c.Q,Entitity:()=>O,Handler:()=>a.RW,Index:()=>n.g,IndexMap:()=>d.n8,Node:()=>S,Options:()=>l.E,Ordered:()=>u.P,Pending:()=>p.J,SortedIndex:()=>s.H,SpatialIndex:()=>o.x,Storage:()=>d.Ke,Symbol:()=>P,Symbols:()=>f.vY,batchActionPayloadSizes:()=>e.cP,createStorageProps:()=>d.gW,default:()=>I,defaultGetActorId:()=>e.Rb,defaultGetGroupedValue:()=>e.zA,defaultOptions:()=>e.vC,defaultSetGroupedValue:()=>e.TT,defaultUpdateOptions:()=>e.hh,defaultValidKeys:()=>e.HQ,ensureSymbolIndex:()=>f.s9,enumActions:()=>e.nb,enumCommonComponents:()=>e.gx,enumDefaultSymbols:()=>e.rN,extractSymbol:()=>f.dB,getActionHandler:()=>a.e6,getSymbolAction:()=>a.dE,handler:()=>a.yf,manyHandler:()=>a.p0,oneHandler:()=>a.i$,padEnum:()=>e.HK,recursiveSymbolExtraction:()=>f.vX,recursiveSymbolIndexesEnsured:()=>f.R$,updater:()=>g.M,utils:()=>b,voidResponder:()=>e.dz});var t={};h.r(t),h.d(t,{ClientActions:()=>A,actions:()=>v,default:()=>C});var e=h(852),n=h(240),s=h(96),o=h(175),r=h(248),i=h(400),c=h(77),a=h(833),l=h(343),u=h(745),p=h(131),d=h(699),f=h(883),y=h(174),g=h(290),b=h(464),S=h(568);class A extends S.NodeActions{actors(){}components(){}entities(){}symbol(){}symbols(){}}const v={...S.default,actors:null,components:null,entities:null,symbol:null,symbols:null},C=v;var w=h(329),E=h(730),x=h(982),O=h(787),P=h(694);const I=a.ZP})(),h.O(m)})()));
//# sourceMappingURL=lib.echo-d.min.js.map