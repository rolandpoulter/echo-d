{"version":3,"file":"system.echo-d.min.js","mappings":"cAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAAe,MAAID,IAEnBD,EAAY,MAAIC,GACjB,CATD,CASqB,oBAAXK,OAAyBA,OAA2B,oBAAXC,OAAyBA,OAAyB,oBAATC,KAAuBA,KAAOC,MAAM,K,8XCPzH,MAAMC,EACTC,aAAaC,EAASC,GAClB,OAAOD,EAAQE,gBAAgBD,EACnC,CACAE,YAAYH,EAASI,EAAYC,EAAU,IAAIC,KAC3CT,KAAKG,QAAUA,EACfH,KAAKQ,QAAUA,EACfR,KAAKO,WAAaA,CACtB,CACAH,QAEI,OADAJ,KAAKU,SAAWT,EAAOG,MAAMJ,KAAKG,QAAS,CAAEQ,KAAMX,KAAKO,WAAYK,QAASZ,KAAKQ,UAC3ER,KAAKU,QAChB,CACAG,QAAQC,GACJ,MAAMJ,EAAWV,KAAKI,QAChBD,EAAUH,KAAKG,QACrB,IAAK,MAAMY,KAAUL,EACjBI,EAAGX,EAASY,EAEpB,EAEG,SAASC,EAAeC,EAASH,GACpC,IAAK,MAAMI,KAAUD,EACjBC,EAAOL,QAAQC,EAEvB,CACO,MAAMK,UAAsB,KAC/Bb,YAAYc,EAASC,EAASC,EAASC,EAAW,MAC9CC,MAAMJ,EAASC,EAASC,EAASC,GACjCvB,KAAKiB,QAAU,EACnB,CACAQ,aAAalB,EAAYC,EAAU,IAAIC,IAAOiB,EAAUzB,GACpD,MAAMiB,EAAS,IAAIQ,EAAQ1B,KAAMO,EAAYC,GAE7C,OADAR,KAAKiB,QAAQU,KAAKT,GACXA,CACX,CACAU,aAAaV,GACT,MAAMW,EAAQ7B,KAAKiB,QAAQa,QAAQZ,IACpB,IAAXW,GACA7B,KAAKiB,QAAQc,OAAOF,EAAO,EAEnC,CACAb,eAAeF,GACXE,EAAehB,KAAKiB,QAASH,EACjC,E","sources":["webpack://echoD/webpack/universalModuleDefinition","webpack://echoD/./lib/extra/system.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"echoD\"] = factory();\n\telse\n\t\troot[\"echoD\"] = factory();\n})(typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : this, () => {\nreturn ","import { Handler } from '../handler.js';\nimport { Storage } from '../storage.js';\nexport class System {\n    static query(handler, query) {\n        return handler.queryComponents(query);\n    }\n    constructor(handler, components, exclude = new Set()) {\n        this.handler = handler;\n        this.exclude = exclude;\n        this.components = components;\n    }\n    query() {\n        this.entities = System.query(this.handler, { with: this.components, without: this.exclude });\n        return this.entities;\n    }\n    execute(fn) {\n        const entities = this.query();\n        const handler = this.handler;\n        for (const entity of entities) {\n            fn(handler, entity);\n        }\n    }\n}\nexport function executeSystems(systems, fn) {\n    for (const system of systems) {\n        system.execute(fn);\n    }\n}\nexport class SystemHandler extends Handler {\n    constructor(context, options, actions, _Storage = Storage) {\n        super(context, options, actions, _Storage);\n        this.systems = [];\n    }\n    createSystem(components, exclude = new Set(), _System = System) {\n        const system = new _System(this, components, exclude);\n        this.systems.push(system);\n        return system;\n    }\n    removeSystem(system) {\n        const index = this.systems.indexOf(system);\n        if (index !== -1) {\n            this.systems.splice(index, 1);\n        }\n    }\n    executeSystems(fn) {\n        executeSystems(this.systems, fn);\n    }\n}\n"],"names":["root","factory","exports","module","define","amd","window","global","self","this","System","static","handler","query","queryComponents","constructor","components","exclude","Set","entities","with","without","execute","fn","entity","executeSystems","systems","system","SystemHandler","context","options","actions","_Storage","super","createSystem","_System","push","removeSystem","index","indexOf","splice"],"sourceRoot":""}